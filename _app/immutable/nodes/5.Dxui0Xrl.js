import"../chunks/CWj6FrbW.js";import{i as pt}from"../chunks/tOQI5rSH.js";import{p as Z}from"../chunks/BYaUy696.js";import{o as gt}from"../chunks/Dt8entXO.js";import{o as ht,v as $,w as bt,x as D,y as x,z as w,A as xt,L,u as r,aH as d,$ as wt,K as E,a0 as I,aL as J,I as t,B as s,C as i,D as g,F as u,aM as $t}from"../chunks/BoVP9MGj.js";import{i as O}from"../chunks/Cwd95KI-.js";import{e as yt,h as Q,i as Dt}from"../chunks/ken_suun.js";import{c as a,s as W}from"../chunks/18MUTvT7.js";import{c as Tt,a as X,h as Y,s as At,L as Lt}from"../chunks/BSiSKTcf.js";import{t as Ot}from"../chunks/BkBjuftV.js";const St=({params:A})=>{const{number:T}=A;return{number:T}},Qt=Object.freeze(Object.defineProperty({__proto__:null,load:St},Symbol.toStringTag,{value:"Module"}));var Mt=$(" <span> </span>",1),kt=$("<dt> </dt> <dd> </dd>",1),Ct=$("<dt> </dt> <dd> </dd>",1),Et=$("<dt> </dt> <dd> </dd>",1),It=$("<dt> </dt> <dd> </dd>",1),Rt=$('<article><p class="svelte-8v87ua"><!></p> <div><!></div></article>'),Bt=$('<div class="f"><dl><!> <!></dl> <div class="r svelte-8v87ua"><p class="svelte-8v87ua"><a> </a></p></div></div> <!>',1),Ht=$('<h2 class="svelte-8v87ua"><!></h2> <section><!></section> <footer class="svelte-8v87ua"><a> </a></footer>',1);function Ut(A,T){ht(T,!1);let h=Z(T,"number",8),R=Ot,z=I(!0),F=I(!0);const N=Tt(),S=a.owner,M=a.repo;let q=I([]),e=I({});gt(async()=>{try{E(e,(await X(`issue-${S}-${M}-${h()}`,()=>N.issues.get({owner:S,repo:M,issue_number:h(),sort:"created",direction:"desc"}))).data),J(e,t(e).metadata={}),t(e).body.includes("<!--")&&t(e).body.split("<!--")[1].split("-->")[0].split(`
`).filter(c=>c.trim()).filter(c=>c.includes(":")).forEach(c=>{J(e,t(e).metadata[c.split(/:(.+)/)[0].trim()]=c.split(/:(.+)/)[1].trim())})}catch(n){Y(n)}E(F,!1);try{E(q,(await X(`issue-comments-${S}-${M}-${h()}`,()=>N.issues.listComments({owner:S,repo:M,issue_number:h()}))).data.reverse())}catch(n){Y(n)}E(z,!1)}),pt();var G=Ht();bt(n=>{x(p=>wt.title=p,[()=>(d(a),d(h()),r(()=>a.i18n.incidentTitle.replace("$NUMBER",h())))],L)});var B=D(G),tt=s(B);{var at=n=>{var p=$t();x(()=>u(p,(d(a),r(()=>a.i18n.incidentDetails)))),w(n,p)},et=n=>{var p=Mt(),c=D(p),y=g(c),k=s(y,!0);i(y),x(()=>{u(c,`${t(e),r(()=>t(e).title)??""} `),At(y,1,(t(e),r(()=>`tag ${t(e).state}`)),"svelte-8v87ua"),u(k,(t(e),d(a),r(()=>t(e).state==="closed"?t(e).metadata.start?a.i18n.incidentCompleted:a.i18n.incidentFixed:t(e).metadata.start?a.i18n.incidentScheduled:a.i18n.incidentOngoing)))}),w(n,p)};O(tt,n=>{t(F)?n(at):n(et,!1)})}i(B);var H=g(B,2),rt=s(H);{var st=n=>{Lt(n,{})},it=n=>{var p=Bt(),c=D(p),y=s(c),k=s(y);{var ot=v=>{var o=kt(),l=D(o),m=s(l,!0);i(l);var _=g(l,2),f=s(_,!0);i(_),x((b,C)=>{u(m,b),u(f,C)},[()=>(t(e),d(a),r(()=>new Date(t(e).metadata.start).getTime()<new Date().getTime()?a.i18n.startedAt:a.i18n.startsAt)),()=>(t(e),d(a),r(()=>new Date(t(e).metadata.start).toLocaleString(a.i18n.locale)))],L),w(v,o)},dt=v=>{var o=Ct(),l=D(o),m=s(l,!0);i(l);var _=g(l,2),f=s(_,!0);i(_),x(b=>{u(m,(d(a),r(()=>a.i18n.incidentOpenedAt))),u(f,b)},[()=>(t(e),d(a),r(()=>new Date(t(e).created_at).toLocaleString(a.i18n.locale)))],L),w(v,o)};O(k,v=>{t(e),r(()=>t(e).metadata.start)?v(ot):v(dt,!1)})}var lt=g(k,2);{var vt=v=>{var o=Et(),l=D(o),m=s(l,!0);i(l);var _=g(l,2),f=s(_,!0);i(_),x(b=>{u(m,(d(a),r(()=>a.i18n.duration))),u(f,b)},[()=>(d(a),t(e),r(()=>a.i18n.durationMin.replace(/\$DURATION/g,Math.floor((new Date(t(e).metadata.end).getTime()-new Date(t(e).metadata.start).getTime())/6e4))))],L),w(v,o)},ct=(v,o)=>{{var l=m=>{var _=It(),f=D(_),b=s(f,!0);i(f);var C=g(f,2),ut=s(C,!0);i(C),x(ft=>{u(b,(d(a),r(()=>a.i18n.incidentClosedAt))),u(ut,ft)},[()=>(t(e),d(a),r(()=>new Date(t(e).closed_at).toLocaleString(a.i18n.locale)))],L),w(m,_)};O(v,m=>{t(e),r(()=>t(e).closed_at)&&m(l)},o)}};O(lt,v=>{t(e),r(()=>t(e).metadata.start&&t(e).metadata.end)?v(vt):v(ct,!1)})}i(y);var P=g(y,2),V=s(P),j=s(V),mt=s(j,!0);i(j),i(V),i(P),i(c);var _t=g(c,2);yt(_t,1,()=>t(q),Dt,(v,o)=>{var l=Rt(),m=s(l),_=s(m);Q(_,()=>(t(o),r(()=>R(t(o).body)))),i(m);var f=g(m,2),b=s(f);Q(b,()=>(d(a),t(o),r(()=>a.i18n.incidentCommentSummary.replace(/\$DATE/g,`<a href=${t(o).html_url}>${new Date(t(o).created_at).toLocaleString(a.i18n.locale)}</a>`).replace(/\$AUTHOR/g,`<a href=${t(o).user.html_url}>@${t(o).user.login}</a>`)))),i(f),i(l),w(v,l)}),x(()=>{W(j,"href",(d(a),d(h()),r(()=>`https://github.com/${a.owner}/${a.repo}/issues/${h()}`))),u(mt,(d(a),r(()=>a.i18n.incidentViewOnGitHub)))}),w(n,p)};O(rt,n=>{t(z)?n(st):n(it,!1)})}i(H);var K=g(H,2),U=s(K),nt=s(U,!0);i(U),i(K),x(()=>{W(U,"href",(d(a),r(()=>a.path))),u(nt,(d(a),r(()=>a.i18n.incidentBack)))}),w(A,G),xt()}function Wt(A,T){let h=Z(T,"data",8);const{number:R}=h();Ut(A,{get number(){return R}})}export{Wt as component,Qt as universal};
