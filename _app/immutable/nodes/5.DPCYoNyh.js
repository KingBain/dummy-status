import{t as x,h as ut,a as g,s as m,f as ft}from"../chunks/DEszVtjC.js";import{i as pt}from"../chunks/bWlMgHpd.js";import{p as X}from"../chunks/B_QQQ50N.js";import{p as gt,f as w,a as h,b as ht,j as T,$ as bt,y as k,ap as C,aq as V,m as t,c as r,d as s,s as f}from"../chunks/CmSReOwR.js";import{a as O}from"../chunks/CQmBJTmS.js";import{e as xt,h as J,i as $t}from"../chunks/DzkLon9H.js";import{c as a,s as K}from"../chunks/CHpALxM7.js";import{c as wt,a as Q,h as W,s as yt,L as Dt}from"../chunks/BE0Pki3t.js";import{o as Tt}from"../chunks/LunpMwYL.js";import{t as Ot}from"../chunks/BkBjuftV.js";const St=({params:D})=>{const{number:y}=D;return{number:y}},Jt=Object.freeze(Object.defineProperty({__proto__:null,load:St},Symbol.toStringTag,{value:"Module"}));var At=x(" <span> </span>",1),Lt=x("<dt> </dt> <dd> </dd>",1),Mt=x("<dt> </dt> <dd> </dd>",1),kt=x("<dt> </dt> <dd> </dd>",1),Ct=x("<dt> </dt> <dd> </dd>",1),Et=x('<article><p class="svelte-8v87ua"><!></p> <div><!></div></article>'),Rt=x('<div class="f"><dl><!> <!></dl> <div class="r svelte-8v87ua"><p class="svelte-8v87ua"><a> </a></p></div></div> <!>',1),jt=x('<h2 class="svelte-8v87ua"><!></h2> <section><!></section> <footer class="svelte-8v87ua"><a> </a></footer>',1);function It(D,y){gt(y,!1);let b=X(y,"number",8),E=Ot,q=C(!0),B=C(!0);const H=wt(),S=a.owner,A=a.repo;let N=C([]),e=C({});Tt(async()=>{try{k(e,(await Q(`issue-${S}-${A}-${b()}`,()=>H.issues.get({owner:S,repo:A,issue_number:b(),sort:"created",direction:"desc"}))).data),V(e,t(e).metadata={}),t(e).body.includes("<!--")&&t(e).body.split("<!--")[1].split("-->")[0].split(`
`).filter(l=>l.trim()).filter(l=>l.includes(":")).forEach(l=>{V(e,t(e).metadata[l.split(/:(.+)/)[0].trim()]=l.split(/:(.+)/)[1].trim())})}catch(i){W(i)}k(B,!1);try{k(N,(await Q(`issue-comments-${S}-${A}-${b()}`,()=>H.issues.listComments({owner:S,repo:A,issue_number:b()}))).data.reverse())}catch(i){W(i)}k(q,!1)}),pt();var z=jt();ut(i=>{h(u=>bt.title=u,[()=>a.i18n.incidentTitle.replace("$NUMBER",b())],T)});var R=w(z),Y=r(R);{var Z=i=>{var u=ft();h(()=>m(u,a.i18n.incidentDetails)),g(i,u)},tt=i=>{var u=At(),l=w(u),$=f(l),L=r($,!0);s($),h(()=>{m(l,`${t(e).title??""} `),yt($,1,`tag ${t(e).state}`,"svelte-8v87ua"),m(L,t(e).state==="closed"?t(e).metadata.start?a.i18n.incidentCompleted:a.i18n.incidentFixed:t(e).metadata.start?a.i18n.incidentScheduled:a.i18n.incidentOngoing)}),g(i,u)};O(Y,i=>{t(B)?i(Z):i(tt,!1)})}s(R);var j=f(R,2),at=r(j);{var et=i=>{Dt(i,{})},rt=i=>{var u=Rt(),l=w(u),$=r(l),L=r($);{var it=d=>{var o=Lt(),n=w(o),v=r(n,!0);s(n);var c=f(n,2),_=r(c,!0);s(c),h((p,M)=>{m(v,p),m(_,M)},[()=>new Date(t(e).metadata.start).getTime()<new Date().getTime()?a.i18n.startedAt:a.i18n.startsAt,()=>new Date(t(e).metadata.start).toLocaleString(a.i18n.locale)],T),g(d,o)},nt=d=>{var o=Mt(),n=w(o),v=r(n,!0);s(n);var c=f(n,2),_=r(c,!0);s(c),h(p=>{m(v,a.i18n.incidentOpenedAt),m(_,p)},[()=>new Date(t(e).created_at).toLocaleString(a.i18n.locale)],T),g(d,o)};O(L,d=>{t(e).metadata.start?d(it):d(nt,!1)})}var ot=f(L,2);{var dt=d=>{var o=kt(),n=w(o),v=r(n,!0);s(n);var c=f(n,2),_=r(c,!0);s(c),h(p=>{m(v,a.i18n.duration),m(_,p)},[()=>a.i18n.durationMin.replace(/\$DURATION/g,Math.floor((new Date(t(e).metadata.end).getTime()-new Date(t(e).metadata.start).getTime())/6e4))],T),g(d,o)},lt=(d,o)=>{{var n=v=>{var c=Ct(),_=w(c),p=r(_,!0);s(_);var M=f(_,2),mt=r(M,!0);s(M),h(_t=>{m(p,a.i18n.incidentClosedAt),m(mt,_t)},[()=>new Date(t(e).closed_at).toLocaleString(a.i18n.locale)],T),g(v,c)};O(d,v=>{t(e).closed_at&&v(n)},o)}};O(ot,d=>{t(e).metadata.start&&t(e).metadata.end?d(dt):d(lt,!1)})}s($);var G=f($,2),P=r(G),U=r(P),vt=r(U,!0);s(U),s(P),s(G),s(l);var ct=f(l,2);xt(ct,1,()=>t(N),$t,(d,o)=>{var n=Et(),v=r(n),c=r(v);J(c,()=>E(t(o).body)),s(v);var _=f(v,2),p=r(_);J(p,()=>a.i18n.incidentCommentSummary.replace(/\$DATE/g,`<a href=${t(o).html_url}>${new Date(t(o).created_at).toLocaleString(a.i18n.locale)}</a>`).replace(/\$AUTHOR/g,`<a href=${t(o).user.html_url}>@${t(o).user.login}</a>`)),s(_),s(n),g(d,n)}),h(()=>{K(U,"href",`https://github.com/${a.owner}/${a.repo}/issues/${b()}`),m(vt,a.i18n.incidentViewOnGitHub)}),g(i,u)};O(at,i=>{t(q)?i(et):i(rt,!1)})}s(j);var F=f(j,2),I=r(F),st=r(I,!0);s(I),s(F),h(()=>{K(I,"href",a.path),m(st,a.i18n.incidentBack)}),g(D,z),ht()}function Kt(D,y){let b=X(y,"data",8);const{number:E}=b();It(D,{number:E})}export{Kt as component,Jt as universal};
