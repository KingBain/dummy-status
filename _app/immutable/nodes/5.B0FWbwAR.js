import"../chunks/Bzak7iHL.js";import{i as pt}from"../chunks/WhDAtJLl.js";import{p as Z}from"../chunks/frR51y3d.js";import{o as gt}from"../chunks/BRbu2weH.js";import{x as ht,y,z as bt,A as w,B as $,C as x,D as xt,u as r,aN as d,$ as $t,N as C,a6 as M,aR as K,L as t,F as s,G as i,I as h,J as _,aS as wt,aT as yt}from"../chunks/Bnp_pt0s.js";import{i as A}from"../chunks/DFBWGomV.js";import{e as Dt,h as Q,i as Tt}from"../chunks/BTBzfQIO.js";import{c as a,s as W}from"../chunks/CSGGCXiR.js";import{c as St,a as X,h as Y,s as At,L as Ot}from"../chunks/4Sgf_GfM.js";import{t as Lt}from"../chunks/BkBjuftV.js";const kt=({params:S})=>{const{number:T}=S;return{number:T}},Wt=Object.freeze(Object.defineProperty({__proto__:null,load:kt},Symbol.toStringTag,{value:"Module"}));var Ct=y(" <span> </span>",1),Mt=y("<dt> </dt> <dd> </dd>",1),Rt=y("<dt> </dt> <dd> </dd>",1),Et=y("<dt> </dt> <dd> </dd>",1),It=y("<dt> </dt> <dd> </dd>",1),Nt=y('<article><p class="svelte-8v87ua"><!></p> <div><!></div></article>'),Bt=y('<div class="f"><dl><!> <!></dl> <div class="r svelte-8v87ua"><p class="svelte-8v87ua"><a> </a></p></div></div> <!>',1),Ut=y('<h2 class="svelte-8v87ua"><!></h2> <section><!></section> <footer class="svelte-8v87ua"><a> </a></footer>',1);function jt(S,T){ht(T,!1);let b=Z(T,"number",8),R=Lt,j=M(!0),z=M(!0);const F=St(),O=a.owner,L=a.repo;let G=M([]),e=M({});gt(async()=>{try{C(e,(await X(`issue-${O}-${L}-${b()}`,()=>F.issues.get({owner:O,repo:L,issue_number:b(),sort:"created",direction:"desc"}))).data),K(e,t(e).metadata={}),t(e).body.includes("<!--")&&t(e).body.split("<!--")[1].split("-->")[0].split(`
`).filter(m=>m.trim()).filter(m=>m.includes(":")).forEach(m=>{K(e,t(e).metadata[m.split(/:(.+)/)[0].trim()]=m.split(/:(.+)/)[1].trim())})}catch(n){Y(n)}C(z,!1);try{C(G,(await X(`issue-comments-${O}-${L}-${b()}`,()=>F.issues.listComments({owner:O,repo:L,issue_number:b()}))).data.reverse())}catch(n){Y(n)}C(j,!1)}),pt();var H=Ut();bt(n=>{$(u=>$t.title=u,[()=>(d(a),d(b()),r(()=>a.i18n.incidentTitle.replace("$NUMBER",b())))])});var E=w(H),tt=s(E);{var at=n=>{var u=wt();$(()=>_(u,(d(a),r(()=>a.i18n.incidentDetails)))),x(n,u)},et=n=>{var u=Ct(),m=w(u),D=h(m),k=s(D,!0);i(D),$(()=>{_(m,`${t(e),r(()=>t(e).title)??""} `),At(D,1,(t(e),r(()=>`tag ${t(e).state}`)),"svelte-8v87ua"),_(k,(t(e),d(a),r(()=>t(e).state==="closed"?t(e).metadata.start?a.i18n.incidentCompleted:a.i18n.incidentFixed:t(e).metadata.start?a.i18n.incidentScheduled:a.i18n.incidentOngoing)))}),x(n,u)};A(tt,n=>{t(z)?n(at):n(et,!1)})}i(E);var I=h(E,2),rt=s(I);{var st=n=>{Ot(n,{})},it=n=>{var u=Bt(),m=w(u),D=s(m),k=s(D);{var ot=v=>{var o=Mt(),l=w(o),f=s(l,!0);i(l);var c=h(l,2),p=s(c,!0);i(c),$((g,U)=>{_(f,g),_(p,U)},[()=>(t(e),d(a),r(()=>new Date(t(e).metadata.start).getTime()<new Date().getTime()?a.i18n.startedAt:a.i18n.startsAt)),()=>(t(e),d(a),r(()=>new Date(t(e).metadata.start).toLocaleString(a.i18n.locale)))]),x(v,o)},dt=v=>{var o=Rt(),l=w(o),f=s(l,!0);i(l);var c=h(l,2),p=s(c,!0);i(c),$(g=>{_(f,(d(a),r(()=>a.i18n.incidentOpenedAt))),_(p,g)},[()=>(t(e),d(a),r(()=>new Date(t(e).created_at).toLocaleString(a.i18n.locale)))]),x(v,o)};A(k,v=>{t(e),r(()=>t(e).metadata.start)?v(ot):v(dt,!1)})}var lt=h(k,2);{var vt=v=>{var o=Et(),l=w(o),f=s(l,!0);i(l);var c=h(l,2),p=s(c,!0);i(c),$(g=>{_(f,(d(a),r(()=>a.i18n.duration))),_(p,g)},[()=>(d(a),t(e),r(()=>a.i18n.durationMin.replace(/\$DURATION/g,Math.floor((new Date(t(e).metadata.end).getTime()-new Date(t(e).metadata.start).getTime())/6e4))))]),x(v,o)},ct=v=>{var o=yt(),l=w(o);{var f=c=>{var p=It(),g=w(p),U=s(g,!0);i(g);var q=h(g,2),ut=s(q,!0);i(q),$(ft=>{_(U,(d(a),r(()=>a.i18n.incidentClosedAt))),_(ut,ft)},[()=>(t(e),d(a),r(()=>new Date(t(e).closed_at).toLocaleString(a.i18n.locale)))]),x(c,p)};A(l,c=>{t(e),r(()=>t(e).closed_at)&&c(f)},!0)}x(v,o)};A(lt,v=>{t(e),r(()=>t(e).metadata.start&&t(e).metadata.end)?v(vt):v(ct,!1)})}i(D);var P=h(D,2),V=s(P),B=s(V),mt=s(B,!0);i(B),i(V),i(P),i(m);var _t=h(m,2);Dt(_t,1,()=>t(G),Tt,(v,o)=>{var l=Nt(),f=s(l),c=s(f);Q(c,()=>(t(o),r(()=>R(t(o).body)))),i(f);var p=h(f,2),g=s(p);Q(g,()=>(d(a),t(o),r(()=>a.i18n.incidentCommentSummary.replace(/\$DATE/g,`<a href=${t(o).html_url}>${new Date(t(o).created_at).toLocaleString(a.i18n.locale)}</a>`).replace(/\$AUTHOR/g,`<a href=${t(o).user.html_url}>@${t(o).user.login}</a>`)))),i(p),i(l),x(v,l)}),$(()=>{W(B,"href",(d(a),d(b()),r(()=>`https://github.com/${a.owner}/${a.repo}/issues/${b()}`))),_(mt,(d(a),r(()=>a.i18n.incidentViewOnGitHub)))}),x(n,u)};A(rt,n=>{t(j)?n(st):n(it,!1)})}i(I);var J=h(I,2),N=s(J),nt=s(N,!0);i(N),i(J),$(()=>{W(N,"href",(d(a),r(()=>a.path))),_(nt,(d(a),r(()=>a.i18n.incidentBack)))}),x(S,H),xt()}function Xt(S,T){let b=Z(T,"data",8);const{number:R}=b();jt(S,{get number(){return R}})}export{Xt as component,Wt as universal};
