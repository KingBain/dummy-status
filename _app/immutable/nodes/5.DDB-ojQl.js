import"../chunks/CWj6FrbW.js";import{i as pt}from"../chunks/BJ11ZHe0.js";import{p as Z}from"../chunks/BmPvb_on.js";import{o as gt}from"../chunks/Dby_e5pt.js";import{o as ht,v as $,w as bt,x as D,y as x,z as w,A as xt,O as A,u as r,aJ as d,$ as wt,K as E,a3 as I,aN as V,I as t,B as s,C as i,D as g,F as u,aO as $t}from"../chunks/CV9VBUnM.js";import{i as S}from"../chunks/CyX3xOQ5.js";import{e as yt,h as Q,i as Dt}from"../chunks/DPsVTImy.js";import{c as a,s as W}from"../chunks/Dr0ZO741.js";import{c as Ot,a as X,h as Y,s as Tt,L as At}from"../chunks/iwAsUrZ0.js";import{t as St}from"../chunks/BkBjuftV.js";const Lt=({params:T})=>{const{number:O}=T;return{number:O}},Qt=Object.freeze(Object.defineProperty({__proto__:null,load:Lt},Symbol.toStringTag,{value:"Module"}));var kt=$(" <span> </span>",1),Ct=$("<dt> </dt> <dd> </dd>",1),Mt=$("<dt> </dt> <dd> </dd>",1),Et=$("<dt> </dt> <dd> </dd>",1),It=$("<dt> </dt> <dd> </dd>",1),Rt=$('<article><p class="svelte-8v87ua"><!></p> <div><!></div></article>'),Bt=$('<div class="f"><dl><!> <!></dl> <div class="r svelte-8v87ua"><p class="svelte-8v87ua"><a> </a></p></div></div> <!>',1),Nt=$('<h2 class="svelte-8v87ua"><!></h2> <section><!></section> <footer class="svelte-8v87ua"><a> </a></footer>',1);function Ut(T,O){ht(O,!1);let h=Z(O,"number",8),R=St,z=I(!0),F=I(!0);const H=Ot(),L=a.owner,k=a.repo;let q=I([]),e=I({});gt(async()=>{try{E(e,(await X(`issue-${L}-${k}-${h()}`,()=>H.issues.get({owner:L,repo:k,issue_number:h(),sort:"created",direction:"desc"}))).data),V(e,t(e).metadata={}),t(e).body.includes("<!--")&&t(e).body.split("<!--")[1].split("-->")[0].split(`
`).filter(c=>c.trim()).filter(c=>c.includes(":")).forEach(c=>{V(e,t(e).metadata[c.split(/:(.+)/)[0].trim()]=c.split(/:(.+)/)[1].trim())})}catch(n){Y(n)}E(F,!1);try{E(q,(await X(`issue-comments-${L}-${k}-${h()}`,()=>H.issues.listComments({owner:L,repo:k,issue_number:h()}))).data.reverse())}catch(n){Y(n)}E(z,!1)}),pt();var G=Nt();bt(n=>{x(p=>wt.title=p,[()=>(d(a),d(h()),r(()=>a.i18n.incidentTitle.replace("$NUMBER",h())))],A)});var B=D(G),tt=s(B);{var at=n=>{var p=$t();x(()=>u(p,(d(a),r(()=>a.i18n.incidentDetails)))),w(n,p)},et=n=>{var p=kt(),c=D(p),y=g(c),C=s(y,!0);i(y),x(()=>{u(c,`${t(e),r(()=>t(e).title)??""} `),Tt(y,1,(t(e),r(()=>`tag ${t(e).state}`)),"svelte-8v87ua"),u(C,(t(e),d(a),r(()=>t(e).state==="closed"?t(e).metadata.start?a.i18n.incidentCompleted:a.i18n.incidentFixed:t(e).metadata.start?a.i18n.incidentScheduled:a.i18n.incidentOngoing)))}),w(n,p)};S(tt,n=>{t(F)?n(at):n(et,!1)})}i(B);var N=g(B,2),rt=s(N);{var st=n=>{At(n,{})},it=n=>{var p=Bt(),c=D(p),y=s(c),C=s(y);{var ot=v=>{var o=Ct(),l=D(o),m=s(l,!0);i(l);var _=g(l,2),f=s(_,!0);i(_),x((b,M)=>{u(m,b),u(f,M)},[()=>(t(e),d(a),r(()=>new Date(t(e).metadata.start).getTime()<new Date().getTime()?a.i18n.startedAt:a.i18n.startsAt)),()=>(t(e),d(a),r(()=>new Date(t(e).metadata.start).toLocaleString(a.i18n.locale)))],A),w(v,o)},dt=v=>{var o=Mt(),l=D(o),m=s(l,!0);i(l);var _=g(l,2),f=s(_,!0);i(_),x(b=>{u(m,(d(a),r(()=>a.i18n.incidentOpenedAt))),u(f,b)},[()=>(t(e),d(a),r(()=>new Date(t(e).created_at).toLocaleString(a.i18n.locale)))],A),w(v,o)};S(C,v=>{t(e),r(()=>t(e).metadata.start)?v(ot):v(dt,!1)})}var lt=g(C,2);{var vt=v=>{var o=Et(),l=D(o),m=s(l,!0);i(l);var _=g(l,2),f=s(_,!0);i(_),x(b=>{u(m,(d(a),r(()=>a.i18n.duration))),u(f,b)},[()=>(d(a),t(e),r(()=>a.i18n.durationMin.replace(/\$DURATION/g,Math.floor((new Date(t(e).metadata.end).getTime()-new Date(t(e).metadata.start).getTime())/6e4))))],A),w(v,o)},ct=(v,o)=>{{var l=m=>{var _=It(),f=D(_),b=s(f,!0);i(f);var M=g(f,2),ut=s(M,!0);i(M),x(ft=>{u(b,(d(a),r(()=>a.i18n.incidentClosedAt))),u(ut,ft)},[()=>(t(e),d(a),r(()=>new Date(t(e).closed_at).toLocaleString(a.i18n.locale)))],A),w(m,_)};S(v,m=>{t(e),r(()=>t(e).closed_at)&&m(l)},o)}};S(lt,v=>{t(e),r(()=>t(e).metadata.start&&t(e).metadata.end)?v(vt):v(ct,!1)})}i(y);var K=g(y,2),P=s(K),j=s(P),mt=s(j,!0);i(j),i(P),i(K),i(c);var _t=g(c,2);yt(_t,1,()=>t(q),Dt,(v,o)=>{var l=Rt(),m=s(l),_=s(m);Q(_,()=>(t(o),r(()=>R(t(o).body)))),i(m);var f=g(m,2),b=s(f);Q(b,()=>(d(a),t(o),r(()=>a.i18n.incidentCommentSummary.replace(/\$DATE/g,`<a href=${t(o).html_url}>${new Date(t(o).created_at).toLocaleString(a.i18n.locale)}</a>`).replace(/\$AUTHOR/g,`<a href=${t(o).user.html_url}>@${t(o).user.login}</a>`)))),i(f),i(l),w(v,l)}),x(()=>{W(j,"href",(d(a),d(h()),r(()=>`https://github.com/${a.owner}/${a.repo}/issues/${h()}`))),u(mt,(d(a),r(()=>a.i18n.incidentViewOnGitHub)))}),w(n,p)};S(rt,n=>{t(z)?n(st):n(it,!1)})}i(N);var J=g(N,2),U=s(J),nt=s(U,!0);i(U),i(J),x(()=>{W(U,"href",(d(a),r(()=>a.path))),u(nt,(d(a),r(()=>a.i18n.incidentBack)))}),w(T,G),xt()}function Wt(T,O){let h=Z(O,"data",8);const{number:R}=h();Ut(T,{get number(){return R}})}export{Wt as component,Qt as universal};
