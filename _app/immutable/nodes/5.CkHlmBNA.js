import{a as x,f as $,s as _,t as _t}from"../chunks/C_2teMw9.js";import{i as ut}from"../chunks/N7Q5tdR4.js";import{p as X}from"../chunks/Bwd3cmDh.js";import{o as ft}from"../chunks/ByIYafIp.js";import{m as pt,n as D,o as w,v as gt,w as ht,I as L,aE as q,F as t,A as l,u as r,$ as bt,x as s,y as i,z as p,ab as k}from"../chunks/C4JtCkt9.js";import{i as E}from"../chunks/Brav6d8V.js";import{e as xt,h as J,i as wt}from"../chunks/B1-0wSeo.js";import{h as $t}from"../chunks/GSoM9Pcg.js";import{c as e,s as K}from"../chunks/D50fp-Et.js";import{c as yt,a as Q,h as W,s as Dt,L as zt}from"../chunks/hcDJn3lz.js";import{t as Tt}from"../chunks/BkBjuftV.js";const At=({params:T})=>{const{number:z}=T;return{number:z}},Kt=Object.freeze(Object.defineProperty({__proto__:null,load:At},Symbol.toStringTag,{value:"Module"}));var Ot=$(" <span> </span>",1),St=$("<dt> </dt> <dd> </dd>",1),Lt=$("<dt> </dt> <dd> </dd>",1),kt=$("<dt> </dt> <dd> </dd>",1),Et=$("<dt> </dt> <dd> </dd>",1),Mt=$('<article><p class="svelte-bs2zv2"><!></p> <div><!></div></article>'),Ct=$('<div class="f"><dl><!> <!></dl> <div class="r svelte-bs2zv2"><p class="svelte-bs2zv2"><a> </a></p></div></div> <!>',1),It=$('<h2 class="svelte-bs2zv2"><!></h2> <section><!></section> <footer class="svelte-bs2zv2"><a> </a></footer>',1);function Rt(T,z){pt(z,!1);let g=X(z,"number",8),M=Tt,j=k(!0),B=k(!0);const F=yt(),A=e.owner,O=e.repo;let H=k([]),a=k({});ft(async()=>{try{L(a,(await Q(`issue-${A}-${O}-${g()}`,()=>F.issues.get({owner:A,repo:O,issue_number:g(),sort:"created",direction:"desc"}))).data),q(a,t(a).metadata={}),t(a).body.includes("<!--")&&t(a).body.split("<!--")[1].split("-->")[0].split(`
`).filter(c=>c.trim()).filter(c=>c.includes(":")).forEach(c=>{q(a,t(a).metadata[c.split(/:(.+)/)[0].trim()]=c.split(/:(.+)/)[1].trim())})}catch(n){W(n)}L(B,!1);try{L(H,(await Q(`issue-comments-${A}-${O}-${g()}`,()=>F.issues.listComments({owner:A,repo:O,issue_number:g()}))).data.reverse())}catch(n){W(n)}L(j,!1)}),ut();var N=It();$t("bs2zv2",n=>{ht(u=>{bt.title=u??""},[()=>(l(e),l(g()),r(()=>e.i18n.incidentTitle.replace("$NUMBER",g())))])});var C=D(N),Y=s(C);{var Z=n=>{var u=_t();w(()=>_(u,(l(e),r(()=>e.i18n.incidentDetails)))),x(n,u)},tt=n=>{var u=Ot(),c=D(u),y=p(c),S=s(y,!0);i(y),w(()=>{_(c,`${t(a),r(()=>t(a).title)??""} `),Dt(y,1,(t(a),r(()=>`tag ${t(a).state}`)),"svelte-bs2zv2"),_(S,(t(a),l(e),r(()=>t(a).state==="closed"?t(a).metadata.start?e.i18n.incidentCompleted:e.i18n.incidentFixed:t(a).metadata.start?e.i18n.incidentScheduled:e.i18n.incidentOngoing)))}),x(n,u)};E(Y,n=>{t(B)?n(Z):n(tt,!1)})}i(C);var I=p(C,2),et=s(I);{var at=n=>{zt(n,{})},rt=n=>{var u=Ct(),c=D(u),y=s(c),S=s(y);{var it=v=>{var o=St(),d=D(o),f=s(d,!0);i(d);var m=p(d,2),h=s(m,!0);i(m),w((b,mt)=>{_(f,b),_(h,mt)},[()=>(t(a),l(e),r(()=>new Date(t(a).metadata.start).getTime()<new Date().getTime()?e.i18n.startedAt:e.i18n.startsAt)),()=>(t(a),l(e),r(()=>new Date(t(a).metadata.start).toLocaleString(e.i18n.locale)))]),x(v,o)},nt=v=>{var o=Lt(),d=D(o),f=s(d,!0);i(d);var m=p(d,2),h=s(m,!0);i(m),w(b=>{_(f,(l(e),r(()=>e.i18n.incidentOpenedAt))),_(h,b)},[()=>(t(a),l(e),r(()=>new Date(t(a).created_at).toLocaleString(e.i18n.locale)))]),x(v,o)};E(S,v=>{t(a),r(()=>t(a).metadata.start)?v(it):v(nt,!1)})}var ot=p(S,2);{var dt=v=>{var o=kt(),d=D(o),f=s(d,!0);i(d);var m=p(d,2),h=s(m,!0);i(m),w(b=>{_(f,(l(e),r(()=>e.i18n.duration))),_(h,b)},[()=>(l(e),t(a),r(()=>e.i18n.durationMin.replace(/\$DURATION/g,Math.floor((new Date(t(a).metadata.end).getTime()-new Date(t(a).metadata.start).getTime())/6e4))))]),x(v,o)},lt=v=>{var o=Et(),d=D(o),f=s(d,!0);i(d);var m=p(d,2),h=s(m,!0);i(m),w(b=>{_(f,(l(e),r(()=>e.i18n.incidentClosedAt))),_(h,b)},[()=>(t(a),l(e),r(()=>new Date(t(a).closed_at).toLocaleString(e.i18n.locale)))]),x(v,o)};E(ot,v=>{t(a),r(()=>t(a).metadata.start&&t(a).metadata.end)?v(dt):(t(a),r(()=>t(a).closed_at)&&v(lt,1))})}i(y);var P=p(y,2),V=s(P),U=s(V),vt=s(U,!0);i(U),i(V),i(P),i(c);var ct=p(c,2);xt(ct,1,()=>t(H),wt,(v,o)=>{var d=Mt(),f=s(d),m=s(f);J(m,()=>(t(o),r(()=>M(t(o).body)))),i(f);var h=p(f,2),b=s(h);J(b,()=>(l(e),t(o),r(()=>e.i18n.incidentCommentSummary.replace(/\$DATE/g,`<a href=${t(o).html_url}>${new Date(t(o).created_at).toLocaleString(e.i18n.locale)}</a>`).replace(/\$AUTHOR/g,`<a href=${t(o).user.html_url}>@${t(o).user.login}</a>`)))),i(h),i(d),x(v,d)}),w(()=>{K(U,"href",(l(e),l(g()),r(()=>`https://github.com/${e.owner}/${e.repo}/issues/${g()}`))),_(vt,(l(e),r(()=>e.i18n.incidentViewOnGitHub)))}),x(n,u)};E(et,n=>{t(j)?n(at):n(rt,!1)})}i(I);var G=p(I,2),R=s(G),st=s(R,!0);i(R),i(G),w(()=>{K(R,"href",(l(e),r(()=>e.path))),_(st,(l(e),r(()=>e.i18n.incidentBack)))}),x(T,N),gt()}function Qt(T,z){let g=X(z,"data",8);const{number:M}=g();Rt(T,{get number(){return M}})}export{Qt as component,Kt as universal};
