import{a as b,f as y,s as _,t as _t}from"../chunks/C7aHCql-.js";import{i as ut}from"../chunks/Bu_H9uF3.js";import{p as Y}from"../chunks/Bow_2nnH.js";import{o as ft}from"../chunks/QJ-qilGm.js";import{m as pt,n as z,o as $,v as gt,w as ht,I as L,F as e,aE as J,A as l,u as r,$ as bt,x as i,y as n,z as f,ab as k}from"../chunks/DkdMm7x7.js";import{i as M}from"../chunks/Bkq5Cqca.js";import{e as xt,h as K,i as wt}from"../chunks/DrdSqple.js";import{h as $t}from"../chunks/BjwTDkek.js";import{c as t,s as Q}from"../chunks/pOQnqaPR.js";import{c as yt,a as W,h as X,s as Dt,L as zt}from"../chunks/CmK7yaTW.js";import{t as St}from"../chunks/BkBjuftV.js";const Tt=({params:T})=>{const{number:S}=T;return{number:S}},Kt=Object.freeze(Object.defineProperty({__proto__:null,load:Tt},Symbol.toStringTag,{value:"Module"}));var At=y(" <span> </span>",1),Ot=y("<dt> </dt> <dd> </dd>",1),Et=y("<dt> </dt> <dd> </dd>",1),Lt=y("<dt> </dt> <dd> </dd>",1),kt=y("<dt> </dt> <dd> </dd>",1),Mt=y('<article><p class="svelte-bs2zv2"><!></p> <div><!></div></article>'),Ct=y('<div class="f"><dl><!> <!></dl> <div class="r svelte-bs2zv2"><p class="svelte-bs2zv2"><a> </a></p></div></div> <!>',1),It=y('<h2 class="svelte-bs2zv2"><!></h2> <section><!></section> <footer class="svelte-bs2zv2"><a> </a></footer>',1);function Rt(T,S){pt(S,!1);let p=Y(S,"number",8),C=St,B=k(!0),F=k(!0);const H=yt(),O=t.owner,E=t.repo;let N=k([]),a=k({});ft(async()=>{try{L(a,(await W(`issue-${O}-${E}-${p()}`,()=>H.issues.get({owner:O,repo:E,issue_number:p(),sort:"created",direction:"desc"}))).data);const s=e(a).body||"";J(a,e(a).metadata={});const v="<!--";s.includes(v)&&s.split(v)[1].split("-->")[0].split(`
`).filter(w=>w.trim()).filter(w=>w.includes(":")).forEach(w=>{J(a,e(a).metadata[w.split(/:(.+)/)[0].trim()]=w.split(/:(.+)/)[1].trim())})}catch(s){X(s)}L(F,!1);try{L(N,(await W(`issue-comments-${O}-${E}-${p()}`,()=>H.issues.listComments({owner:O,repo:E,issue_number:p()}))).data.reverse())}catch(s){X(s)}L(B,!1)}),ut();var G=It();$t("bs2zv2",s=>{ht(v=>{bt.title=v??""},[()=>(l(t),l(p()),r(()=>t.i18n.incidentTitle.replace("$NUMBER",p())))])});var I=z(G),Z=i(I);{var tt=s=>{var v=_t();$(()=>_(v,(l(t),r(()=>t.i18n.incidentDetails)))),b(s,v)},et=s=>{var v=At(),D=z(v),x=f(D),A=i(x,!0);n(x),$(()=>{_(D,`${e(a),r(()=>e(a).title)??""} `),Dt(x,1,(e(a),r(()=>`tag ${e(a).state}`)),"svelte-bs2zv2"),_(A,(e(a),l(t),r(()=>e(a).state==="closed"?e(a).metadata.start?t.i18n.incidentCompleted:t.i18n.incidentFixed:e(a).metadata.start?t.i18n.incidentScheduled:t.i18n.incidentOngoing)))}),b(s,v)};M(Z,s=>{e(F)?s(tt):s(et,!1)})}n(I);var R=f(I,2),at=i(R);{var rt=s=>{zt(s,{})},st=s=>{var v=Ct(),D=z(v),x=i(D),A=i(x);{var w=c=>{var o=Ot(),d=z(o),u=i(d,!0);n(d);var m=f(d,2),g=i(m,!0);n(m),$((h,mt)=>{_(u,h),_(g,mt)},[()=>(e(a),l(t),r(()=>new Date(e(a).metadata.start).getTime()<new Date().getTime()?t.i18n.startedAt:t.i18n.startsAt)),()=>(e(a),l(t),r(()=>new Date(e(a).metadata.start).toLocaleString(t.i18n.locale)))]),b(c,o)},nt=c=>{var o=Et(),d=z(o),u=i(d,!0);n(d);var m=f(d,2),g=i(m,!0);n(m),$(h=>{_(u,(l(t),r(()=>t.i18n.incidentOpenedAt))),_(g,h)},[()=>(e(a),l(t),r(()=>new Date(e(a).created_at).toLocaleString(t.i18n.locale)))]),b(c,o)};M(A,c=>{e(a),r(()=>e(a).metadata.start)?c(w):c(nt,!1)})}var ot=f(A,2);{var dt=c=>{var o=Lt(),d=z(o),u=i(d,!0);n(d);var m=f(d,2),g=i(m,!0);n(m),$(h=>{_(u,(l(t),r(()=>t.i18n.duration))),_(g,h)},[()=>(l(t),e(a),r(()=>t.i18n.durationMin.replace(/\$DURATION/g,Math.floor((new Date(e(a).metadata.end).getTime()-new Date(e(a).metadata.start).getTime())/6e4))))]),b(c,o)},lt=c=>{var o=kt(),d=z(o),u=i(d,!0);n(d);var m=f(d,2),g=i(m,!0);n(m),$(h=>{_(u,(l(t),r(()=>t.i18n.incidentClosedAt))),_(g,h)},[()=>(e(a),l(t),r(()=>new Date(e(a).closed_at).toLocaleString(t.i18n.locale)))]),b(c,o)};M(ot,c=>{e(a),r(()=>e(a).metadata.start&&e(a).metadata.end)?c(dt):(e(a),r(()=>e(a).closed_at)&&c(lt,1))})}n(x);var V=f(x,2),q=i(V),j=i(q),ct=i(j,!0);n(j),n(q),n(V),n(D);var vt=f(D,2);xt(vt,1,()=>e(N),wt,(c,o)=>{var d=Mt(),u=i(d),m=i(u);K(m,()=>(e(o),r(()=>C(e(o).body)))),n(u);var g=f(u,2),h=i(g);K(h,()=>(l(t),e(o),r(()=>t.i18n.incidentCommentSummary.replace(/\$DATE/g,`<a href=${e(o).html_url}>${new Date(e(o).created_at).toLocaleString(t.i18n.locale)}</a>`).replace(/\$AUTHOR/g,`<a href=${e(o).user.html_url}>@${e(o).user.login}</a>`)))),n(g),n(d),b(c,d)}),$(()=>{Q(j,"href",(l(t),l(p()),r(()=>`https://github.com/${t.owner}/${t.repo}/issues/${p()}`))),_(ct,(l(t),r(()=>t.i18n.incidentViewOnGitHub)))}),b(s,v)};M(at,s=>{e(B)?s(rt):s(st,!1)})}n(R);var P=f(R,2),U=i(P),it=i(U,!0);n(U),n(P),$(()=>{Q(U,"href",(l(t),r(()=>t.path))),_(it,(l(t),r(()=>t.i18n.incidentBack)))}),b(T,G),gt()}function Qt(T,S){let p=Y(S,"data",8);const{number:C}=p();Rt(T,{get number(){return C}})}export{Qt as component,Kt as universal};
