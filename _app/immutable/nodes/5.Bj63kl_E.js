import"../chunks/Bzak7iHL.js";import{i as pt}from"../chunks/D5bd7e4A.js";import{p as Z}from"../chunks/iRhiA7jk.js";import{o as gt}from"../chunks/D0-W9Cax.js";import{x as ht,y,z as bt,A as w,B as $,C as x,D as xt,u as r,aM as d,$ as $t,N as M,a6 as k,aQ as q,L as t,F as s,G as i,I as h,J as _,aR as wt,aS as yt}from"../chunks/K2JGGxmd.js";import{i as z}from"../chunks/CJWBioV-.js";import{e as Dt,h as K,i as St}from"../chunks/DKWVisfq.js";import{c as a,s as W}from"../chunks/C9QiMLYT.js";import{c as Tt,a as X,h as Y,s as zt,L as At}from"../chunks/BMpa8FC1.js";import{t as Ot}from"../chunks/BkBjuftV.js";const Lt=({params:T})=>{const{number:S}=T;return{number:S}},Wt=Object.freeze(Object.defineProperty({__proto__:null,load:Lt},Symbol.toStringTag,{value:"Module"}));var Mt=y(" <span> </span>",1),kt=y("<dt> </dt> <dd> </dd>",1),Ct=y("<dt> </dt> <dd> </dd>",1),Rt=y("<dt> </dt> <dd> </dd>",1),Et=y("<dt> </dt> <dd> </dd>",1),It=y('<article><p class="svelte-bs2zv2"><!></p> <div><!></div></article>'),Bt=y('<div class="f"><dl><!> <!></dl> <div class="r svelte-bs2zv2"><p class="svelte-bs2zv2"><a> </a></p></div></div> <!>',1),Nt=y('<h2 class="svelte-bs2zv2"><!></h2> <section><!></section> <footer class="svelte-bs2zv2"><a> </a></footer>',1);function Ut(T,S){ht(S,!1);let b=Z(S,"number",8),C=Ot,U=k(!0),j=k(!0);const F=Tt(),A=a.owner,O=a.repo;let G=k([]),e=k({});gt(async()=>{try{M(e,(await X(`issue-${A}-${O}-${b()}`,()=>F.issues.get({owner:A,repo:O,issue_number:b(),sort:"created",direction:"desc"}))).data),q(e,t(e).metadata={}),t(e).body.includes("<!--")&&t(e).body.split("<!--")[1].split("-->")[0].split(`
`).filter(m=>m.trim()).filter(m=>m.includes(":")).forEach(m=>{q(e,t(e).metadata[m.split(/:(.+)/)[0].trim()]=m.split(/:(.+)/)[1].trim())})}catch(n){Y(n)}M(j,!1);try{M(G,(await X(`issue-comments-${A}-${O}-${b()}`,()=>F.issues.listComments({owner:A,repo:O,issue_number:b()}))).data.reverse())}catch(n){Y(n)}M(U,!1)}),pt();var H=Nt();bt(n=>{$(u=>$t.title=u,[()=>(d(a),d(b()),r(()=>a.i18n.incidentTitle.replace("$NUMBER",b())))])});var R=w(H),tt=s(R);{var at=n=>{var u=wt();$(()=>_(u,(d(a),r(()=>a.i18n.incidentDetails)))),x(n,u)},et=n=>{var u=Mt(),m=w(u),D=h(m),L=s(D,!0);i(D),$(()=>{_(m,`${t(e),r(()=>t(e).title)??""} `),zt(D,1,(t(e),r(()=>`tag ${t(e).state}`)),"svelte-bs2zv2"),_(L,(t(e),d(a),r(()=>t(e).state==="closed"?t(e).metadata.start?a.i18n.incidentCompleted:a.i18n.incidentFixed:t(e).metadata.start?a.i18n.incidentScheduled:a.i18n.incidentOngoing)))}),x(n,u)};z(tt,n=>{t(j)?n(at):n(et,!1)})}i(R);var E=h(R,2),rt=s(E);{var st=n=>{At(n,{})},it=n=>{var u=Bt(),m=w(u),D=s(m),L=s(D);{var ot=v=>{var o=kt(),l=w(o),f=s(l,!0);i(l);var c=h(l,2),p=s(c,!0);i(c),$((g,N)=>{_(f,g),_(p,N)},[()=>(t(e),d(a),r(()=>new Date(t(e).metadata.start).getTime()<new Date().getTime()?a.i18n.startedAt:a.i18n.startsAt)),()=>(t(e),d(a),r(()=>new Date(t(e).metadata.start).toLocaleString(a.i18n.locale)))]),x(v,o)},dt=v=>{var o=Ct(),l=w(o),f=s(l,!0);i(l);var c=h(l,2),p=s(c,!0);i(c),$(g=>{_(f,(d(a),r(()=>a.i18n.incidentOpenedAt))),_(p,g)},[()=>(t(e),d(a),r(()=>new Date(t(e).created_at).toLocaleString(a.i18n.locale)))]),x(v,o)};z(L,v=>{t(e),r(()=>t(e).metadata.start)?v(ot):v(dt,!1)})}var lt=h(L,2);{var vt=v=>{var o=Rt(),l=w(o),f=s(l,!0);i(l);var c=h(l,2),p=s(c,!0);i(c),$(g=>{_(f,(d(a),r(()=>a.i18n.duration))),_(p,g)},[()=>(d(a),t(e),r(()=>a.i18n.durationMin.replace(/\$DURATION/g,Math.floor((new Date(t(e).metadata.end).getTime()-new Date(t(e).metadata.start).getTime())/6e4))))]),x(v,o)},ct=v=>{var o=yt(),l=w(o);{var f=c=>{var p=Et(),g=w(p),N=s(g,!0);i(g);var V=h(g,2),ut=s(V,!0);i(V),$(ft=>{_(N,(d(a),r(()=>a.i18n.incidentClosedAt))),_(ut,ft)},[()=>(t(e),d(a),r(()=>new Date(t(e).closed_at).toLocaleString(a.i18n.locale)))]),x(c,p)};z(l,c=>{t(e),r(()=>t(e).closed_at)&&c(f)},!0)}x(v,o)};z(lt,v=>{t(e),r(()=>t(e).metadata.start&&t(e).metadata.end)?v(vt):v(ct,!1)})}i(D);var P=h(D,2),Q=s(P),B=s(Q),mt=s(B,!0);i(B),i(Q),i(P),i(m);var _t=h(m,2);Dt(_t,1,()=>t(G),St,(v,o)=>{var l=It(),f=s(l),c=s(f);K(c,()=>(t(o),r(()=>C(t(o).body)))),i(f);var p=h(f,2),g=s(p);K(g,()=>(d(a),t(o),r(()=>a.i18n.incidentCommentSummary.replace(/\$DATE/g,`<a href=${t(o).html_url}>${new Date(t(o).created_at).toLocaleString(a.i18n.locale)}</a>`).replace(/\$AUTHOR/g,`<a href=${t(o).user.html_url}>@${t(o).user.login}</a>`)))),i(p),i(l),x(v,l)}),$(()=>{W(B,"href",(d(a),d(b()),r(()=>`https://github.com/${a.owner}/${a.repo}/issues/${b()}`))),_(mt,(d(a),r(()=>a.i18n.incidentViewOnGitHub)))}),x(n,u)};z(rt,n=>{t(U)?n(st):n(it,!1)})}i(E);var J=h(E,2),I=s(J),nt=s(I,!0);i(I),i(J),$(()=>{W(I,"href",(d(a),r(()=>a.path))),_(nt,(d(a),r(()=>a.i18n.incidentBack)))}),x(T,H),xt()}function Xt(T,S){let b=Z(S,"data",8);const{number:C}=b();Ut(T,{get number(){return C}})}export{Xt as component,Wt as universal};
