import"../chunks/Bzak7iHL.js";import{i as pt}from"../chunks/BDd3pR0F.js";import{p as Z}from"../chunks/BbdQwiYF.js";import{o as gt}from"../chunks/ChSgCvw-.js";import{w as ht,x as y,y as bt,z as $,A as w,B as x,C as xt,u as r,aM as d,$ as wt,M as k,a5 as C,aQ as q,K as t,D as s,F as i,G as h,I as _,aR as $t,aS as yt}from"../chunks/BPQaCOXD.js";import{i as A}from"../chunks/3o3-br4A.js";import{e as Dt,h as J,i as St}from"../chunks/vZgEmQWY.js";import{c as a,s as W}from"../chunks/BYzoz4Qb.js";import{c as Tt,a as X,h as Y,s as At,L as Ot}from"../chunks/D2RZUH6_.js";import{t as Mt}from"../chunks/BkBjuftV.js";const Lt=({params:T})=>{const{number:S}=T;return{number:S}},Wt=Object.freeze(Object.defineProperty({__proto__:null,load:Lt},Symbol.toStringTag,{value:"Module"}));var kt=y(" <span> </span>",1),Ct=y("<dt> </dt> <dd> </dd>",1),Rt=y("<dt> </dt> <dd> </dd>",1),Et=y("<dt> </dt> <dd> </dd>",1),It=y("<dt> </dt> <dd> </dd>",1),Bt=y('<article><p class="svelte-8v87ua"><!></p> <div><!></div></article>'),Ut=y('<div class="f"><dl><!> <!></dl> <div class="r svelte-8v87ua"><p class="svelte-8v87ua"><a> </a></p></div></div> <!>',1),jt=y('<h2 class="svelte-8v87ua"><!></h2> <section><!></section> <footer class="svelte-8v87ua"><a> </a></footer>',1);function zt(T,S){ht(S,!1);let b=Z(S,"number",8),R=Mt,z=C(!0),F=C(!0);const G=Tt(),O=a.owner,M=a.repo;let H=C([]),e=C({});gt(async()=>{try{k(e,(await X(`issue-${O}-${M}-${b()}`,()=>G.issues.get({owner:O,repo:M,issue_number:b(),sort:"created",direction:"desc"}))).data),q(e,t(e).metadata={}),t(e).body.includes("<!--")&&t(e).body.split("<!--")[1].split("-->")[0].split(`
`).filter(m=>m.trim()).filter(m=>m.includes(":")).forEach(m=>{q(e,t(e).metadata[m.split(/:(.+)/)[0].trim()]=m.split(/:(.+)/)[1].trim())})}catch(n){Y(n)}k(F,!1);try{k(H,(await X(`issue-comments-${O}-${M}-${b()}`,()=>G.issues.listComments({owner:O,repo:M,issue_number:b()}))).data.reverse())}catch(n){Y(n)}k(z,!1)}),pt();var N=jt();bt(n=>{w(u=>wt.title=u,[()=>(d(a),d(b()),r(()=>a.i18n.incidentTitle.replace("$NUMBER",b())))])});var E=$(N),tt=s(E);{var at=n=>{var u=$t();w(()=>_(u,(d(a),r(()=>a.i18n.incidentDetails)))),x(n,u)},et=n=>{var u=kt(),m=$(u),D=h(m),L=s(D,!0);i(D),w(()=>{_(m,`${t(e),r(()=>t(e).title)??""} `),At(D,1,(t(e),r(()=>`tag ${t(e).state}`)),"svelte-8v87ua"),_(L,(t(e),d(a),r(()=>t(e).state==="closed"?t(e).metadata.start?a.i18n.incidentCompleted:a.i18n.incidentFixed:t(e).metadata.start?a.i18n.incidentScheduled:a.i18n.incidentOngoing)))}),x(n,u)};A(tt,n=>{t(F)?n(at):n(et,!1)})}i(E);var I=h(E,2),rt=s(I);{var st=n=>{Ot(n,{})},it=n=>{var u=Ut(),m=$(u),D=s(m),L=s(D);{var ot=v=>{var o=Ct(),l=$(o),f=s(l,!0);i(l);var c=h(l,2),p=s(c,!0);i(c),w((g,j)=>{_(f,g),_(p,j)},[()=>(t(e),d(a),r(()=>new Date(t(e).metadata.start).getTime()<new Date().getTime()?a.i18n.startedAt:a.i18n.startsAt)),()=>(t(e),d(a),r(()=>new Date(t(e).metadata.start).toLocaleString(a.i18n.locale)))]),x(v,o)},dt=v=>{var o=Rt(),l=$(o),f=s(l,!0);i(l);var c=h(l,2),p=s(c,!0);i(c),w(g=>{_(f,(d(a),r(()=>a.i18n.incidentOpenedAt))),_(p,g)},[()=>(t(e),d(a),r(()=>new Date(t(e).created_at).toLocaleString(a.i18n.locale)))]),x(v,o)};A(L,v=>{t(e),r(()=>t(e).metadata.start)?v(ot):v(dt,!1)})}var lt=h(L,2);{var vt=v=>{var o=Et(),l=$(o),f=s(l,!0);i(l);var c=h(l,2),p=s(c,!0);i(c),w(g=>{_(f,(d(a),r(()=>a.i18n.duration))),_(p,g)},[()=>(d(a),t(e),r(()=>a.i18n.durationMin.replace(/\$DURATION/g,Math.floor((new Date(t(e).metadata.end).getTime()-new Date(t(e).metadata.start).getTime())/6e4))))]),x(v,o)},ct=v=>{var o=yt(),l=$(o);{var f=c=>{var p=It(),g=$(p),j=s(g,!0);i(g);var V=h(g,2),ut=s(V,!0);i(V),w(ft=>{_(j,(d(a),r(()=>a.i18n.incidentClosedAt))),_(ut,ft)},[()=>(t(e),d(a),r(()=>new Date(t(e).closed_at).toLocaleString(a.i18n.locale)))]),x(c,p)};A(l,c=>{t(e),r(()=>t(e).closed_at)&&c(f)},!0)}x(v,o)};A(lt,v=>{t(e),r(()=>t(e).metadata.start&&t(e).metadata.end)?v(vt):v(ct,!1)})}i(D);var P=h(D,2),Q=s(P),U=s(Q),mt=s(U,!0);i(U),i(Q),i(P),i(m);var _t=h(m,2);Dt(_t,1,()=>t(H),St,(v,o)=>{var l=Bt(),f=s(l),c=s(f);J(c,()=>(t(o),r(()=>R(t(o).body)))),i(f);var p=h(f,2),g=s(p);J(g,()=>(d(a),t(o),r(()=>a.i18n.incidentCommentSummary.replace(/\$DATE/g,`<a href=${t(o).html_url}>${new Date(t(o).created_at).toLocaleString(a.i18n.locale)}</a>`).replace(/\$AUTHOR/g,`<a href=${t(o).user.html_url}>@${t(o).user.login}</a>`)))),i(p),i(l),x(v,l)}),w(()=>{W(U,"href",(d(a),d(b()),r(()=>`https://github.com/${a.owner}/${a.repo}/issues/${b()}`))),_(mt,(d(a),r(()=>a.i18n.incidentViewOnGitHub)))}),x(n,u)};A(rt,n=>{t(z)?n(st):n(it,!1)})}i(I);var K=h(I,2),B=s(K),nt=s(B,!0);i(B),i(K),w(()=>{W(B,"href",(d(a),r(()=>a.path))),_(nt,(d(a),r(()=>a.i18n.incidentBack)))}),x(T,N),xt()}function Xt(T,S){let b=Z(S,"data",8);const{number:R}=b();zt(T,{get number(){return R}})}export{Xt as component,Wt as universal};
