import{h as A,X as y,d as $,F as V,Y as j,Z as ee,_ as B,f as D,s as H,j as M,C as U,a0 as re,a1 as P,c as ae,a2 as z,a3 as ne,a4 as fe,O as le,a5 as ie,a6 as Y,a7 as se,a8 as X,a9 as ue,aa as oe,ab as te,b as q,ac as m,ad as Z,ae as x,af as O,ag as ve,ah as de,ai as ce,g as K,o as pe,J as he,aj as _e,ak as ge,al as Ee,am as me,an as Te,ao as Ae,k as F}from"./DQAYL-gC.js";import{b as G}from"./DBXir8wT.js";function Re(e,l){return l}function we(e,l,f){for(var v=[],_=l.length,o,i=l.length,a=0;a<_;a++){let u=l[a];x(u,()=>{if(o){if(o.pending.delete(u),o.done.add(u),o.pending.size===0){var p=e.outrogroups;L(Y(o.done)),p.delete(o),p.size===0&&(e.outrogroups=null)}}else i-=1},!1)}if(i===0){var n=v.length===0&&f!==null;if(n){var s=f,t=s.parentNode;de(t),t.append(s),e.items.clear()}L(l,!n)}else o={pending:new Set(l),done:new Set},(e.outrogroups??=new Set).add(o)}function L(e,l=!0){for(var f=0;f<e.length;f++)ce(e[f],l)}var J;function Se(e,l,f,v,_,o=null){var i=e,a=new Map;A&&y();var n=null,s=le(()=>{var d=f();return ie(d)?d:d==null?[]:Y(d)}),t,u=!0;function p(){r.fallback=n,Ce(r,t,i,l,v),n!==null&&(t.length===0?(n.f&m)===0?Z(n):(n.f^=m,k(n,null,i)):x(n,()=>{n=null}))}var I=$(()=>{t=V(s);var d=t.length;let w=!1;if(A){var C=j(i)===ee;C!==(d===0)&&(i=B(),D(i),H(!1),w=!0)}for(var h=new Set,T=ae,N=fe(),g=0;g<d;g+=1){A&&M.nodeType===U&&M.data===re&&(i=M,w=!0,H(!1));var R=t[g],b=v(R,g),c=u?null:a.get(b);c?(c.v&&P(c.v,R),c.i&&P(c.i,g),N&&T.unskip_effect(c.e)):(c=Ne(a,u?i:J??=q(),R,b,g,_,l,f),u||(c.e.f|=m),a.set(b,c)),h.add(b)}if(d===0&&o&&!n&&(u?n=z(()=>o(i)):(n=z(()=>o(J??=q())),n.f|=m)),d>h.size&&ne(),A&&d>0&&D(B()),!u)if(N){for(const[Q,W]of a)h.has(Q)||T.skip_effect(W.e);T.oncommit(p),T.ondiscard(()=>{})}else p();w&&H(!0),V(s)}),r={effect:I,items:a,outrogroups:null,fallback:n};u=!1,A&&(i=M)}function S(e){for(;e!==null&&(e.f&ve)===0;)e=e.next;return e}function Ce(e,l,f,v,_){var o=l.length,i=e.items,a=S(e.effect.first),n,s=null,t=[],u=[],p,I,r,d;for(d=0;d<o;d+=1){if(p=l[d],I=_(p,d),r=i.get(I).e,e.outrogroups!==null)for(const c of e.outrogroups)c.pending.delete(r),c.done.delete(r);if((r.f&m)!==0)if(r.f^=m,r===a)k(r,null,f);else{var w=s?s.next:a;r===e.effect.last&&(e.effect.last=r.prev),r.prev&&(r.prev.next=r.next),r.next&&(r.next.prev=r.prev),E(e,s,r),E(e,r,w),k(r,w,f),s=r,t=[],u=[],a=S(s.next);continue}if((r.f&O)!==0&&Z(r),r!==a){if(n!==void 0&&n.has(r)){if(t.length<u.length){var C=u[0],h;s=C.prev;var T=t[0],N=t[t.length-1];for(h=0;h<t.length;h+=1)k(t[h],C,f);for(h=0;h<u.length;h+=1)n.delete(u[h]);E(e,T.prev,N.next),E(e,s,T),E(e,N,C),a=C,s=N,d-=1,t=[],u=[]}else n.delete(r),k(r,a,f),E(e,r.prev,r.next),E(e,r,s===null?e.effect.first:s.next),E(e,s,r),s=r;continue}for(t=[],u=[];a!==null&&a!==r;)(n??=new Set).add(a),u.push(a),a=S(a.next);if(a===null)continue}(r.f&m)===0&&t.push(r),s=r,a=S(r.next)}if(e.outrogroups!==null){for(const c of e.outrogroups)c.pending.size===0&&(L(Y(c.done)),e.outrogroups?.delete(c));e.outrogroups.size===0&&(e.outrogroups=null)}if(a!==null||n!==void 0){var g=[];if(n!==void 0)for(r of n)(r.f&O)===0&&g.push(r);for(;a!==null;)(a.f&O)===0&&a!==e.fallback&&g.push(a),a=S(a.next);var R=g.length;if(R>0){var b=null;we(e,g,b)}}}function Ne(e,l,f,v,_,o,i,a){var n=(i&ue)!==0?(i&oe)===0?te(f,!1,!1):X(f):null,s=(i&se)!==0?X(_):null;return{v:n,i:s,e:z(()=>(o(l,n??f,s??_,a),()=>{e.delete(v)}))}}function k(e,l,f){if(e.nodes)for(var v=e.nodes.start,_=e.nodes.end,o=l&&(l.f&m)===0?l.nodes.start:f;v!==null;){var i=K(v);if(o.before(v),v===_)return;v=i}}function E(e,l,f){l===null?e.effect.first=f:l.next=f,f===null?e.effect.last=l:f.prev=l}function ke(e,l,f=!1,v=!1,_=!1){var o=e,i="";pe(()=>{var a=he;if(i===(i=l()??"")){A&&y();return}if(a.nodes!==null&&(_e(a.nodes.start,a.nodes.end),a.nodes=null),i!==""){if(A){M.data;for(var n=y(),s=n;n!==null&&(n.nodeType!==U||n.data!=="");)s=n,n=K(n);if(n===null)throw ge(),Ee;G(M,s),o=D(n);return}var t=f?Te:v?Ae:void 0,u=me(f?"svg":v?"math":"template",t);u.innerHTML=i;var p=f||v?u:u.content;if(G(F(p),p.lastChild),f||v)for(;F(p);)o.before(F(p));else o.before(p)}})}export{Se as e,ke as h,Re as i};
