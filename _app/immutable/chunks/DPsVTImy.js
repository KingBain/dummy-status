import{h as y,c as C,b as J,I as S,O as K,d as P,f as Q,g as Y,s as O,j as k,n as I,_ as q,a0 as W,k as x,m as B,p as Z,a1 as U,a2 as j,a3 as ee,a4 as L,a5 as M,M as D,a6 as ae,a7 as re,a8 as ne,a9 as fe,aa as le,ab as se,ac as ie,ad as te,ae as X,y as ue,af as ve,ag as de,ah as _e,ai as V,aj as oe,ak as R}from"./CV9VBUnM.js";function Ee(t,e){return e}function he(t,e,r,u){for(var h=[],v=e.length,i=0;i<v;i++)ne(e[i].e,h,!0);var _=v>0&&h.length===0&&r!==null;if(_){var n=r.parentNode;fe(n),n.append(r),u.clear(),m(t,e[0].prev,e[v-1].next)}le(h,()=>{for(var c=0;c<v;c++){var a=e[c];_||(u.delete(a.k),m(t,a.prev,a.next)),se(a.e,!_)}})}function me(t,e,r,u,h,v=null){var i=t,_={flags:e,items:new Map,first:null};y&&C();var n=null,c=!1,a=K(()=>{var f=r();return j(f)?f:f==null?[]:U(f)});J(()=>{var f=S(a),l=f.length;if(c&&l===0)return;c=l===0;let o=!1;if(y){var d=P(i)===Q;d!==(l===0)&&(i=Y(),O(i),k(!1),o=!0)}if(y){for(var T=null,p,s=0;s<l;s++){if(I.nodeType===q&&I.data===W){i=I,o=!0,k(!1);break}var g=f[s],w=u(g,s);p=z(I,_,T,null,g,w,s,h,e,r),_.items.set(w,p),T=p}l>0&&O(Y())}y||ce(f,_,i,h,e,u,r),v!==null&&(l===0?n?x(n):n=B(()=>v(i)):n!==null&&Z(n,()=>{n=null})),o&&k(!0),S(a)}),y&&(i=I)}function ce(t,e,r,u,h,v,i){var _=t.length,n=e.items,c=e.first,a=c,f,l=null,o=[],d=[],T,p,s,g;for(g=0;g<_;g+=1){if(T=t[g],p=v(T,g),s=n.get(p),s===void 0){var w=a?a.e.nodes_start:r;l=z(w,e,l,l===null?e.first:l.next,T,p,g,u,h,i),n.set(p,l),o=[],d=[],a=l.next;continue}if(ge(s,T,g),(s.e.f&M)!==0&&x(s.e),s!==a){if(f!==void 0&&f.has(s)){if(o.length<d.length){var A=d[0],E;l=A.prev;var H=o[0],b=o[o.length-1];for(E=0;E<o.length;E+=1)$(o[E],A,r);for(E=0;E<d.length;E+=1)f.delete(d[E]);m(e,H.prev,b.next),m(e,l,H),m(e,b,A),a=A,l=b,g-=1,o=[],d=[]}else f.delete(s),$(s,a,r),m(e,s.prev,s.next),m(e,s,l===null?e.first:l.next),m(e,l,s),l=s;continue}for(o=[],d=[];a!==null&&a.k!==p;)(a.e.f&M)===0&&(f??(f=new Set)).add(a),d.push(a),a=a.next;if(a===null)continue;s=a}o.push(s),l=s,a=s.next}if(a!==null||f!==void 0){for(var N=f===void 0?[]:U(f);a!==null;)(a.e.f&M)===0&&N.push(a),a=a.next;var F=N.length;if(F>0){var G=null;he(e,N,G,n)}}D.first=e.first&&e.first.e,D.last=l&&l.e}function ge(t,e,r,u){re(t.v,e),t.i=r}function z(t,e,r,u,h,v,i,_,n,c){var a=(n&ie)!==0,f=(n&te)===0,l=a?f?ee(h,!1,!1):L(h):h,o=(n&ae)===0?i:L(i),d={i:o,v:l,k:v,a:null,e:null,prev:r,next:u};try{return d.e=B(()=>_(t,l,o,c),y),d.e.prev=r&&r.e,d.e.next=u&&u.e,r===null?e.first=d:(r.next=d,r.e.next=d.e),u!==null&&(u.prev=d,u.e.prev=d.e),d}finally{}}function $(t,e,r){for(var u=t.next?t.next.e.nodes_start:r,h=e?e.e.nodes_start:r,v=t.e.nodes_start;v!==u;){var i=X(v);h.before(v),v=i}}function m(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function ye(t,e,r=!1,u=!1,h=!1){var v=t,i="";ue(()=>{var _=D;if(i===(i=e()??"")){y&&C();return}if(_.nodes_start!==null&&(ve(_.nodes_start,_.nodes_end),_.nodes_start=_.nodes_end=null),i!==""){if(y){I.data;for(var n=C(),c=n;n!==null&&(n.nodeType!==q||n.data!=="");)c=n,n=X(n);if(n===null)throw de(),_e;V(I,c),v=O(n);return}var a=i+"";r?a=`<svg>${a}</svg>`:u&&(a=`<math>${a}</math>`);var f=oe(a);if((r||u)&&(f=R(f)),V(R(f),f.lastChild),r||u)for(;R(f);)v.before(R(f));else v.before(f)}})}export{me as e,ye as h,Ee as i};
