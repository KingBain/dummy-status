import{h as N,d as V,b as ee,K as x,Q as ae,f as re,H as ne,g as B,s as $,j as S,v as b,a1 as Q,a2 as le,m as k,n as se,c as fe,a3 as U,a4 as te,k as ie,a5 as ue,a6 as F,a7 as ve,o as X,p as de,a8 as oe,a9 as Y,aa as z,ab as _e,ac as he,ad as G,ae as ce,af as me,ag as pe,N as J,A as Ee,ah as ge,ai as Te,aj as we,ak as K,al as Ae,am as H}from"./BGzRUJEb.js";function be(t,n){return n}function Ie(t,n,e){for(var f=t.items,h=[],v=n.length,i=0;i<v;i++)ce(n[i].e,h,!0);var o=v>0&&h.length===0&&e!==null;if(o){var l=e.parentNode;me(l),l.append(e),f.clear(),I(t,n[0].prev,n[v-1].next)}pe(h,()=>{for(var E=0;E<v;E++){var _=n[E];o||(f.delete(_.k),I(t,_.prev,_.next)),z(_.e,!o)}})}function Me(t,n,e,f,h,v=null){var i=t,o={flags:n,items:new Map,first:null};N&&V();var l=null,E=!1,_=new Map,c=ae(()=>{var a=e();return te(a)?a:a==null?[]:U(a)}),r,m;function s(){Ne(m,r,o,_,i,h,n,f,e),v!==null&&(r.length===0?l?X(l):l=k(()=>v(i)):l!==null&&de(l,()=>{l=null}))}ee(()=>{m??(m=J),r=x(c);var a=r.length;if(E&&a===0)return;E=a===0;let p=!1;if(N){var M=re(i)===ne;M!==(a===0)&&(i=B(),$(i),S(!1),p=!0)}if(N){for(var T=null,u,d=0;d<a;d++){if(b.nodeType===Q&&b.data===le){i=b,p=!0,S(!1);break}var g=r[d],w=f(g,d);u=q(b,o,T,null,g,w,d,h,n,e),o.items.set(w,u),T=u}a>0&&$(B())}if(N)a===0&&v&&(l=k(()=>v(i)));else if(se()){var C=new Set,R=fe;for(d=0;d<a;d+=1){g=r[d],w=f(g,d);var A=o.items.get(w)??_.get(w);A?P(A,g,d):(u=q(null,o,null,null,g,w,d,h,n,e,!0),_.set(w,u)),C.add(w)}for(const[D,y]of o.items)C.has(D)||R.skipped_effects.add(y.e);R.add_callback(s)}else s();p&&S(!0),x(c)}),N&&(i=b)}function Ne(t,n,e,f,h,v,i,o,l){var E=n.length,_=e.items,c=e.first,r=c,m,s=null,a=[],p=[],M,T,u,d;for(d=0;d<E;d+=1){if(M=n[d],T=o(M,d),u=_.get(T),u===void 0){var g=f.get(T);if(g!==void 0){f.delete(T),_.set(T,g);var w=s?s.next:r;I(e,s,g),I(e,g,w),L(g,w,h),s=g}else{var C=r?r.e.nodes_start:h;s=q(C,e,s,s===null?e.first:s.next,M,T,d,v,i,l)}_.set(T,s),a=[],p=[],r=s.next;continue}if(P(u,M,d),(u.e.f&Y)!==0&&X(u.e),u!==r){if(m!==void 0&&m.has(u)){if(a.length<p.length){var R=p[0],A;s=R.prev;var D=a[0],y=a[a.length-1];for(A=0;A<a.length;A+=1)L(a[A],R,h);for(A=0;A<p.length;A+=1)m.delete(p[A]);I(e,D.prev,y.next),I(e,s,D),I(e,y,R),r=R,s=y,d-=1,a=[],p=[]}else m.delete(u),L(u,r,h),I(e,u.prev,u.next),I(e,u,s===null?e.first:s.next),I(e,s,u),s=u;continue}for(a=[],p=[];r!==null&&r.k!==T;)(r.e.f&Y)===0&&(m??(m=new Set)).add(r),p.push(r),r=r.next;if(r===null)continue;u=r}a.push(u),s=u,r=u.next}if(r!==null||m!==void 0){for(var O=m===void 0?[]:U(m);r!==null;)(r.e.f&Y)===0&&O.push(r),r=r.next;var W=O.length;if(W>0){var Z=null;Ie(e,O,Z)}}t.first=e.first&&e.first.e,t.last=s&&s.e;for(var j of f.values())z(j.e);f.clear()}function P(t,n,e,f){ve(t.v,n),t.i=e}function q(t,n,e,f,h,v,i,o,l,E,_){var c=(l&_e)!==0,r=(l&he)===0,m=c?r?ue(h,!1,!1):F(h):h,s=(l&oe)===0?i:F(i),a={i:s,v:m,k:v,a:null,e:null,prev:e,next:f};try{if(t===null){var p=document.createDocumentFragment();p.append(t=ie())}return a.e=k(()=>o(t,m,s,E),N),a.e.prev=e&&e.e,a.e.next=f&&f.e,e===null?_||(n.first=a):(e.next=a,e.e.next=a.e),f!==null&&(f.prev=a,f.e.prev=a.e),a}finally{}}function L(t,n,e){for(var f=t.next?t.next.e.nodes_start:e,h=n?n.e.nodes_start:e,v=t.e.nodes_start;v!==null&&v!==f;){var i=G(v);h.before(v),v=i}}function I(t,n,e){n===null?t.first=e:(n.next=e,n.e.next=e&&e.e),e!==null&&(e.prev=n,e.e.prev=n&&n.e)}function ye(t,n,e=!1,f=!1,h=!1){var v=t,i="";Ee(()=>{var o=J;if(i===(i=n()??"")){N&&V();return}if(o.nodes_start!==null&&(ge(o.nodes_start,o.nodes_end),o.nodes_start=o.nodes_end=null),i!==""){if(N){b.data;for(var l=V(),E=l;l!==null&&(l.nodeType!==Q||l.data!=="");)E=l,l=G(l);if(l===null)throw Te(),we;K(b,E),v=$(l);return}var _=i+"";e?_=`<svg>${_}</svg>`:f&&(_=`<math>${_}</math>`);var c=Ae(_);if((e||f)&&(c=H(c)),K(H(c),c.lastChild),e||f)for(;H(c);)v.before(H(c));else v.before(c)}})}export{Me as e,ye as h,be as i};
