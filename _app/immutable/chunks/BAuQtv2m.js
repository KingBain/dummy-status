import{l as b,r as i,t as y,q as k,h as w,i as E,c as t,a as g,u as q,p as A}from"./BzSC0BI-.js";function C(e,f,a=f){var s=new WeakSet;b(e,"input",async c=>{var v=c?e.defaultValue:e.value;if(v=u(e)?n(v):v,a(v),t!==null&&s.add(t),await g(),v!==(v=f())){var r=e.selectionStart,d=e.selectionEnd;e.value=v??"",d!==null&&(e.selectionStart=r,e.selectionEnd=Math.min(d,e.value.length))}}),(w&&e.defaultValue!==e.value||q(f)==null&&e.value)&&(a(u(e)?n(e.value):e.value),t!==null&&s.add(t)),i(()=>{var c=f();if(e===document.activeElement){var v=A??t;if(s.has(v))return}u(e)&&c===n(e.value)||e.type==="date"&&!c&&!e.value||c!==e.value&&(e.value=c??"")})}const h=new Set;function D(e,f,a,s,c=s){var v=a.getAttribute("type")==="checkbox",r=e;let d=!1;if(f!==null)for(var _ of f)r=r[_]??(r[_]=[]);r.push(a),b(a,"change",()=>{var l=a.__value;v&&(l=m(r,l,a.checked)),c(l)},()=>c(v?[]:null)),i(()=>{var l=s();if(w&&a.defaultChecked!==a.checked){d=!0;return}v?(l=l||[],a.checked=l.includes(a.__value)):a.checked=E(a.__value,l)}),y(()=>{var l=r.indexOf(a);l!==-1&&r.splice(l,1)}),h.has(r)||(h.add(r),k(()=>{r.sort((l,o)=>l.compareDocumentPosition(o)===4?-1:1),h.delete(r)})),k(()=>{if(d){var l;if(v)l=m(r,l,a.checked);else{var o=r.find(S=>S.checked);l=o==null?void 0:o.__value}c(l)}})}function m(e,f,a){for(var s=new Set,c=0;c<e.length;c+=1)e[c].checked&&s.add(e[c].__value);return a||s.delete(f),Array.from(s)}function u(e){var f=e.type;return f==="number"||f==="range"}function n(e){return e===""?null:+e}export{D as a,C as b};
