var x={"":["<em>","</em>"],_:["<strong>","</strong>"],"*":["<strong>","</strong>"],"~":["<s>","</s>"],"\n":["<br />"]," ":["<br />"],"-":["<hr />"]};function f(r){return r.replace(RegExp("^"+(r.match(/^(\t| )+/)||"")[0],"gm"),"")}function l(r){return(r+"").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function b(r,w){var t,s,e,p,n,i=/((?:^|\n+)(?:\n---+|\* \*(?: \*)+)\n)|(?:^``` *(\w*)\n([\s\S]*?)\n```$)|((?:(?:^|\n+)(?:\t|  {2,}).+)+\n*)|((?:(?:^|\n)([>*+-]|\d+\.)\s+.*)+)|(?:!\[([^\]]*?)\]\(([^)]+?)\))|(\[)|(\](?:\(([^)]+?)\))?)|(?:(?:^|\n+)([^\s].*)\n(-{3,}|={3,})(?:\n+|$))|(?:(?:^|\n+)(#{1,6})\s*(.+)(?:\n+|$))|(?:`([^`].*?)`)|(  \n\n*|\n{2,}|__|\*\*|[_*]|~~)/gm,c=[],g="",m=w||{},h=0;function $(o){var a=x[o[1]||""],u=c[c.length-1]==o;return a?a[1]?(u?c.pop():c.push(o),a[0|u]):a[0]:o}function d(){for(var o="";c.length;)o+=$(c[c.length-1]);return o}for(r=r.replace(/^\[(.+?)\]:\s*(.+)$/gm,function(o,a,u){return m[a.toLowerCase()]=u,""}).replace(/^\n+|\n+$/g,"");e=i.exec(r);)s=r.substring(h,e.index),h=i.lastIndex,t=e[0],s.match(/[^\\](\\\\)*\\$/)||((n=e[3]||e[4])?t='<pre class="code '+(e[4]?"poetry":e[2].toLowerCase())+'"><code'+(e[2]?' class="language-'+e[2].toLowerCase()+'"':"")+">"+f(l(n).replace(/^\n+|\n+$/g,""))+"</code></pre>":(n=e[6])?(n.match(/\./)&&(e[5]=e[5].replace(/^\d+/gm,"")),p=b(f(e[5].replace(/^\s*[>*+.-]/gm,""))),n==">"?n="blockquote":(n=n.match(/\./)?"ol":"ul",p=p.replace(/^(.*)(\n|$)/gm,"<li>$1</li>")),t="<"+n+">"+p+"</"+n+">"):e[8]?t='<img src="'+l(e[8])+'" alt="'+l(e[7])+'">':e[10]?(g=g.replace("<a>",'<a href="'+l(e[11]||m[s.toLowerCase()])+'">'),t=d()+"</a>"):e[9]?t="<a>":e[12]||e[14]?t="<"+(n="h"+(e[14]?e[14].length:e[13]>"="?1:2))+">"+b(e[12]||e[15],m)+"</"+n+">":e[16]?t="<code>"+l(e[16])+"</code>":(e[17]||e[1])&&(t=$(e[17]||"--"))),g+=s,g+=t;return(g+r.substring(h)+d()).replace(/^\n+|\n+$/g,"")}export{b as t};
