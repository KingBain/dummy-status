import{c as _,ad as g,ai as o,ae as T,b as v,a2 as p,h as l,j as m,ar as A,a4 as k,d as R,X as w,as as E,Y as S,at as D,Z as F,_ as M,f as N,s as b}from"./DQAYL-gC.js";class x{anchor;#s=new Map;#t=new Map;#e=new Map;#a=new Set;#i=!0;constructor(s,t=!0){this.anchor=s,this.#i=t}#r=()=>{var s=_;if(this.#s.has(s)){var t=this.#s.get(s),e=this.#t.get(t);if(e)g(e),this.#a.delete(t);else{var r=this.#e.get(t);r&&(this.#t.set(t,r.effect),this.#e.delete(t),r.fragment.lastChild.remove(),this.anchor.before(r.fragment),e=r.effect)}for(const[i,f]of this.#s){if(this.#s.delete(i),i===s)break;const a=this.#e.get(f);a&&(o(a.effect),this.#e.delete(f))}for(const[i,f]of this.#t){if(i===t||this.#a.has(i))continue;const a=()=>{if(Array.from(this.#s.values()).includes(i)){var c=document.createDocumentFragment();A(f,c),c.append(v()),this.#e.set(i,{effect:f,fragment:c})}else o(f);this.#a.delete(i),this.#t.delete(i)};this.#i||!e?(this.#a.add(i),T(f,a,!1)):a()}}};#f=s=>{this.#s.delete(s);const t=Array.from(this.#s.values());for(const[e,r]of this.#e)t.includes(e)||(o(r.effect),this.#e.delete(e))};ensure(s,t){var e=_,r=k();if(t&&!this.#t.has(s)&&!this.#e.has(s))if(r){var i=document.createDocumentFragment(),f=v();i.append(f),this.#e.set(s,{effect:p(()=>t(f)),fragment:i})}else this.#t.set(s,p(()=>t(this.anchor)));if(this.#s.set(e,s),r){for(const[a,n]of this.#t)a===s?e.unskip_effect(n):e.skip_effect(n);for(const[a,n]of this.#e)a===s?e.unskip_effect(n.effect):e.skip_effect(n.effect);e.oncommit(this.#r),e.ondiscard(this.#f)}else l&&(this.anchor=m),this.#r()}}function Y(d,s,t=!1){var e;l&&(e=m,w());var r=new x(d),i=t?E:0;function f(a,n){if(l){var c=S(e),h;if(c===D?h=0:c===F?h=!1:h=parseInt(c.substring(1)),a!==h){var u=M();N(u),r.anchor=u,b(!1),r.ensure(a,n),b(!0);return}}r.ensure(a,n)}R(()=>{var a=!1;s((n,c=0)=>{a=!0,f(c,n)}),a||f(!1,null)},i)}export{x as B,Y as i};
