import{h as w,X as D,d as $,F as B,Y as j,Z as ee,_ as P,f as z,s as O,j as R,C as Z,a0 as re,a1 as X,c as ae,a2 as L,a3 as ne,a4 as fe,O as le,a5 as ie,a6 as V,a7 as se,a8 as q,a9 as ue,aa as oe,ab as te,b as G,ac as T,ad as x,ae as K,af as F,ag as ve,ah as de,ai as ce,g as Q,o as pe,J as he,aj as _e,ak as ge,al as Ee,am as me,an as Te,ao as Ae,k as y}from"./C4JtCkt9.js";import{b as J}from"./C_2teMw9.js";function Re(e,l){return l}function we(e,l,f){for(var v=[],_=l.length,o,i=l.length,a=0;a<_;a++){let u=l[a];K(u,()=>{if(o){if(o.pending.delete(u),o.done.add(u),o.pending.size===0){var c=e.outrogroups;Y(V(o.done)),c.delete(o),c.size===0&&(e.outrogroups=null)}}else i-=1},!1)}if(i===0){var n=v.length===0&&f!==null;if(n){var s=f,t=s.parentNode;de(t),t.append(s),e.items.clear()}Y(l,!n)}else o={pending:new Set(l),done:new Set},(e.outrogroups??(e.outrogroups=new Set)).add(o)}function Y(e,l=!0){for(var f=0;f<e.length;f++)ce(e[f],l)}var U;function Se(e,l,f,v,_,o=null){var i=e,a=new Map;w&&D();var n=null,s=le(()=>{var d=f();return ie(d)?d:d==null?[]:V(d)}),t,u=!0;function c(){r.fallback=n,Ce(r,t,i,l,v),n!==null&&(t.length===0?(n.f&T)===0?x(n):(n.f^=T,I(n,null,i)):K(n,()=>{n=null}))}var H=$(()=>{t=B(s);var d=t.length;let C=!1;if(w){var N=j(i)===ee;N!==(d===0)&&(i=P(),z(i),O(!1),C=!0)}for(var p=new Set,A=ae,b=fe(),g=0;g<d;g+=1){w&&R.nodeType===Z&&R.data===re&&(i=R,C=!0,O(!1));var S=t[g],M=v(S,g),h=u?null:a.get(M);h?(h.v&&X(h.v,S),h.i&&X(h.i,g),b&&A.unskip_effect(h.e)):(h=Ne(a,u?i:U??(U=G()),S,M,g,_,l,f),u||(h.e.f|=T),a.set(M,h)),p.add(M)}if(d===0&&o&&!n&&(u?n=L(()=>o(i)):(n=L(()=>o(U??(U=G()))),n.f|=T)),d>p.size&&ne(),w&&d>0&&z(P()),!u)if(b){for(const[E,W]of a)p.has(E)||A.skip_effect(W.e);A.oncommit(c),A.ondiscard(()=>{})}else c();C&&O(!0),B(s)}),r={effect:H,items:a,outrogroups:null,fallback:n};u=!1,w&&(i=R)}function k(e){for(;e!==null&&(e.f&ve)===0;)e=e.next;return e}function Ce(e,l,f,v,_){var h;var o=l.length,i=e.items,a=k(e.effect.first),n,s=null,t=[],u=[],c,H,r,d;for(d=0;d<o;d+=1){if(c=l[d],H=_(c,d),r=i.get(H).e,e.outrogroups!==null)for(const E of e.outrogroups)E.pending.delete(r),E.done.delete(r);if((r.f&T)!==0)if(r.f^=T,r===a)I(r,null,f);else{var C=s?s.next:a;r===e.effect.last&&(e.effect.last=r.prev),r.prev&&(r.prev.next=r.next),r.next&&(r.next.prev=r.prev),m(e,s,r),m(e,r,C),I(r,C,f),s=r,t=[],u=[],a=k(s.next);continue}if((r.f&F)!==0&&x(r),r!==a){if(n!==void 0&&n.has(r)){if(t.length<u.length){var N=u[0],p;s=N.prev;var A=t[0],b=t[t.length-1];for(p=0;p<t.length;p+=1)I(t[p],N,f);for(p=0;p<u.length;p+=1)n.delete(u[p]);m(e,A.prev,b.next),m(e,s,A),m(e,b,N),a=N,s=b,d-=1,t=[],u=[]}else n.delete(r),I(r,a,f),m(e,r.prev,r.next),m(e,r,s===null?e.effect.first:s.next),m(e,s,r),s=r;continue}for(t=[],u=[];a!==null&&a!==r;)(n??(n=new Set)).add(a),u.push(a),a=k(a.next);if(a===null)continue}(r.f&T)===0&&t.push(r),s=r,a=k(r.next)}if(e.outrogroups!==null){for(const E of e.outrogroups)E.pending.size===0&&(Y(V(E.done)),(h=e.outrogroups)==null||h.delete(E));e.outrogroups.size===0&&(e.outrogroups=null)}if(a!==null||n!==void 0){var g=[];if(n!==void 0)for(r of n)(r.f&F)===0&&g.push(r);for(;a!==null;)(a.f&F)===0&&a!==e.fallback&&g.push(a),a=k(a.next);var S=g.length;if(S>0){var M=null;we(e,g,M)}}}function Ne(e,l,f,v,_,o,i,a){var n=(i&ue)!==0?(i&oe)===0?te(f,!1,!1):q(f):null,s=(i&se)!==0?q(_):null;return{v:n,i:s,e:L(()=>(o(l,n??f,s??_,a),()=>{e.delete(v)}))}}function I(e,l,f){if(e.nodes)for(var v=e.nodes.start,_=e.nodes.end,o=l&&(l.f&T)===0?l.nodes.start:f;v!==null;){var i=Q(v);if(o.before(v),v===_)return;v=i}}function m(e,l,f){l===null?e.effect.first=f:l.next=f,f===null?e.effect.last=l:f.prev=l}function ke(e,l,f=!1,v=!1,_=!1){var o=e,i="";pe(()=>{var a=he;if(i===(i=l()??"")){w&&D();return}if(a.nodes!==null&&(_e(a.nodes.start,a.nodes.end),a.nodes=null),i!==""){if(w){R.data;for(var n=D(),s=n;n!==null&&(n.nodeType!==Z||n.data!=="");)s=n,n=Q(n);if(n===null)throw ge(),Ee;J(R,s),o=z(n);return}var t=f?Te:v?Ae:void 0,u=me(f?"svg":v?"math":"template",t);u.innerHTML=i;var c=f||v?u:u.content;if(J(y(c),c.lastChild),f||v)for(;y(c);)o.before(y(c));else o.before(c)}})}export{Se as e,ke as h,Re as i};
