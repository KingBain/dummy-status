import{h as y,c as M,b as G,I as Y,L as J,d as K,f as P,g as L,s as D,j as k,n as I,X as $,Y as Q,k as q,m as x,p as W,Z as B,_ as j,a0 as ee,a1 as S,a2 as C,a3 as H,a4 as ae,a5 as re,a6 as ne,a7 as fe,a8 as le,a9 as se,aa as ie,ab as te,ac as U,y as ue,ad as ve,ae as de,af as _e,ag as V,ah as oe,ai as R}from"./BoVP9MGj.js";function Ee(t,e){return e}function he(t,e,r,u){for(var h=[],v=e.length,i=0;i<v;i++)ne(e[i].e,h,!0);var _=v>0&&h.length===0&&r!==null;if(_){var n=r.parentNode;fe(n),n.append(r),u.clear(),m(t,e[0].prev,e[v-1].next)}le(h,()=>{for(var c=0;c<v;c++){var a=e[c];_||(u.delete(a.k),m(t,a.prev,a.next)),se(a.e,!_)}})}function me(t,e,r,u,h,v=null){var i=t,_={flags:e,items:new Map,first:null};y&&M();var n=null,c=!1,a=J(()=>{var f=r();return j(f)?f:f==null?[]:B(f)});G(()=>{var f=Y(a),l=f.length;if(c&&l===0)return;c=l===0;let o=!1;if(y){var d=K(i)===P;d!==(l===0)&&(i=L(),D(i),k(!1),o=!0)}if(y){for(var T=null,p,s=0;s<l;s++){if(I.nodeType===$&&I.data===Q){i=I,o=!0,k(!1);break}var g=f[s],w=u(g,s);p=Z(I,_,T,null,g,w,s,h,e,r),_.items.set(w,p),T=p}l>0&&D(L())}y||ce(f,_,i,h,e,u,r),v!==null&&(l===0?n?q(n):n=x(()=>v(i)):n!==null&&W(n,()=>{n=null})),o&&k(!0),Y(a)}),y&&(i=I)}function ce(t,e,r,u,h,v,i){var _=t.length,n=e.items,c=e.first,a=c,f,l=null,o=[],d=[],T,p,s,g;for(g=0;g<_;g+=1){if(T=t[g],p=v(T,g),s=n.get(p),s===void 0){var w=a?a.e.nodes_start:r;l=Z(w,e,l,l===null?e.first:l.next,T,p,g,u,h,i),n.set(p,l),o=[],d=[],a=l.next;continue}if(ge(s,T,g),(s.e.f&C)!==0&&q(s.e),s!==a){if(f!==void 0&&f.has(s)){if(o.length<d.length){var A=d[0],E;l=A.prev;var O=o[0],b=o[o.length-1];for(E=0;E<o.length;E+=1)X(o[E],A,r);for(E=0;E<d.length;E+=1)f.delete(d[E]);m(e,O.prev,b.next),m(e,l,O),m(e,b,A),a=A,l=b,g-=1,o=[],d=[]}else f.delete(s),X(s,a,r),m(e,s.prev,s.next),m(e,s,l===null?e.first:l.next),m(e,l,s),l=s;continue}for(o=[],d=[];a!==null&&a.k!==p;)(a.e.f&C)===0&&(f??(f=new Set)).add(a),d.push(a),a=a.next;if(a===null)continue;s=a}o.push(s),l=s,a=s.next}if(a!==null||f!==void 0){for(var N=f===void 0?[]:B(f);a!==null;)(a.e.f&C)===0&&N.push(a),a=a.next;var z=N.length;if(z>0){var F=null;he(e,N,F,n)}}H.first=e.first&&e.first.e,H.last=l&&l.e}function ge(t,e,r,u){re(t.v,e),t.i=r}function Z(t,e,r,u,h,v,i,_,n,c){var a=(n&ie)!==0,f=(n&te)===0,l=a?f?ee(h,!1,!1):S(h):h,o=(n&ae)===0?i:S(i),d={i:o,v:l,k:v,a:null,e:null,prev:r,next:u};try{return d.e=x(()=>_(t,l,o,c),y),d.e.prev=r&&r.e,d.e.next=u&&u.e,r===null?e.first=d:(r.next=d,r.e.next=d.e),u!==null&&(u.prev=d,u.e.prev=d.e),d}finally{}}function X(t,e,r){for(var u=t.next?t.next.e.nodes_start:r,h=e?e.e.nodes_start:r,v=t.e.nodes_start;v!==u;){var i=U(v);h.before(v),v=i}}function m(t,e,r){e===null?t.first=r:(e.next=r,e.e.next=r&&r.e),r!==null&&(r.prev=e,r.e.prev=e&&e.e)}function ye(t,e,r=!1,u=!1,h=!1){var v=t,i="";ue(()=>{var _=H;if(i===(i=e()??"")){y&&M();return}if(_.nodes_start!==null&&(ve(_.nodes_start,_.nodes_end),_.nodes_start=_.nodes_end=null),i!==""){if(y){I.data;for(var n=M(),c=n;n!==null&&(n.nodeType!==$||n.data!=="");)c=n,n=U(n);if(n===null)throw de(),_e;V(I,c),v=D(n);return}var a=i+"";r?a=`<svg>${a}</svg>`:u&&(a=`<math>${a}</math>`);var f=oe(a);if((r||u)&&(f=R(f)),V(R(f),f.lastChild),r||u)for(;R(f);)v.before(R(f));else v.before(f)}})}export{me as e,ye as h,Ee as i};
